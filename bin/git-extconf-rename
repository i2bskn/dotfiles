#!/usr/bin/env ruby

require "fileutils"

def rename_toggle!(path)
  fullpath = File.expand_path(path)
  renamed_path = [fullpath, "switch"].join(".")
  options = { force: true, verbose: true }

  if File.exist?(fullpath)
    FileUtils.mv fullpath, renamed_path, **options
  elsif File.exist?(renamed_path)
    FileUtils.mv renamed_path, fullpath, **options
  end
end

def main
  if gitconfig = `git config --get include.path`.chomp
    rename_toggle!(gitconfig)
  else
    puts "Include setting not found: 'include.path'"
  end
end

main
